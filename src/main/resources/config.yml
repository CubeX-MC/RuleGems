# ==========================================
# RuleGems 插件配置
# ==========================================

# 语言设置 (zh/en/ru/es/de)
language: zh

# 宝石随机生成范围
random_place_range:
  world: world
  corner1: { x: -100, y: 160, z: -100 }
  corner2: { x: 100, y: 30, z: 100 }

# 全局设置
toggles:
  broadcast_redeem_title: true  # 兑换后是否向全服广播

# 集齐全部宝石后的奖励配置
redeem_all:
  broadcast: true
  titles:
    - "&a%player% 集齐了全部宝石！"
    - "&e获得了至高权力！"
  sound: ENTITY_ENDER_DRAGON_GROWL
  permissions: []  # 额外授予的永久权限
  # 集齐后额外授予的限次自定义指令
  # command_allows 格式说明：
  #   - command: 玩家输入的命令
  #     execute: 实际执行的命令列表（支持 console: 或 player-op: 前缀）
  #     time_limit: 可用次数（-1=无限）
  #     cooldown: 冷却时间（秒）
  # 占位符：%player%=玩家名, %arg1%=第1个参数, %arg2|默认%=第2个参数或默认值
  command_allows: []

# ==========================================
# 宝石定义
# ==========================================
gems:
  # 正义宝石 - 限制5次的jail指令
  justice:
    material: AMETHYST_BLOCK
    name: "&d正义宝石"
    count: 1
    mutual_exclusive: []
    lore:
      - "&e可用指令:"
      - "&a/rgjail <玩家> [监狱] [时长]"
      - "&7使用次数: &c5次"
      - "&7冷却时间: &660秒"
    enchanted: true
    redeem_title: ["&d%player% 兑换了正义宝石", "&e正义由你守护！"]
    particle: ENCHANTMENT_TABLE
    sound: BLOCK_AMETHYST_BLOCK_RESONATE
    permissions: []
    command_allows:
      - command: "/rgjail"
        execute:
          - "console:cmi jail %arg1% %arg2|jailed% %arg3|5m%"
        time_limit: 5
        cooldown: 60
    on_pickup:
      commands: []
      sound: BLOCK_AMETHYST_BLOCK_RESONATE
      particle: ENCHANTMENT_TABLE
    on_scatter:
      commands: []
      sound: ENTITY_WITHER_SKELETON_DEATH
      particle: PORTAL
    on_redeem:
      commands: []
      sound: ENTITY_ENDER_DRAGON_GROWL
      particle: DRAGON_BREATH

  # 真相宝石 - CoreProtect检查权限
  truth:
    material: DIAMOND_BLOCK
    name: "&b真相宝石"
    count: 1
    mutual_exclusive: []
    lore:
      - "&e授予权限:"
      - "&a/co inspect &7- 检查模式"
      - "&a/co lookup &7- 查询记录"
      - "&7使用次数: &a无限"
    enchanted: true
    redeem_title: ["&b%player% 兑换了真相宝石", "&e真相将为你揭晓！"]
    particle: GLOW
    sound: BLOCK_SCULK_SENSOR_CLICKING
    permissions:
      - "coreprotect.inspect"
      - "coreprotect.lookup"
    command_allows: []
    on_pickup:
      commands: []
      sound: BLOCK_SCULK_SENSOR_CLICKING
      particle: GLOW
    on_scatter:
      commands: []
      sound: ENTITY_ALLAY_DEATH
      particle: SOUL
    on_redeem:
      commands: []
      sound: BLOCK_BEACON_ACTIVATE
      particle: END_ROD

  # 飞行宝石 - 限次Console执行的限时飞行
  flight:
    material: QUARTZ_BLOCK
    name: "&e飞行宝石"
    count: 1
    mutual_exclusive: []
    lore:
      - "&e可用指令:"
      - "&a/tempfly &7- 60秒飞行"
      - "&7使用次数: &c3次"
      - "&7冷却时间: &6300秒"
    enchanted: true
    redeem_title: ["&e%player% 兑换了飞行宝石", "&b展翅翱翔！"]
    particle: CLOUD
    sound: ENTITY_ENDER_DRAGON_FLAP
    permissions: []
    command_allows:
      - command: "/tempfly"
        execute:
          - "console:cmi tfly %player% 60"
          - "console:tellraw %player% {\"text\":\"✈ 你获得了60秒飞行时间！\",\"color\":\"green\"}"
        time_limit: 3
        cooldown: 300
    on_pickup:
      commands: []
      sound: ENTITY_ENDER_DRAGON_FLAP
      particle: CLOUD
    on_scatter:
      commands: []
      sound: ENTITY_PHANTOM_DEATH
      particle: POOF
    on_redeem:
      commands: []
      sound: ENTITY_BAT_TAKEOFF
      particle: FIREWORK

  # 生命宝石 - Heal权限
  life:
    material: REDSTONE_BLOCK
    name: "&c生命宝石"
    count: 1
    mutual_exclusive: []
    lore:
      - "&e授予权限:"
      - "&a/heal &7- 恢复生命值"
      - "&7使用次数: &a无限"
    enchanted: true
    redeem_title: ["&c%player% 兑换了生命宝石", "&e生命之力流淌全身！"]
    particle: HEART
    sound: BLOCK_BEACON_POWER_SELECT
    permissions:
      - "cmi.command.heal"
    command_allows: []
    on_pickup:
      commands: []
      sound: BLOCK_BEACON_POWER_SELECT
      particle: HEART
    on_scatter:
      commands: []
      sound: ENTITY_ZOMBIE_VILLAGER_DEATH
      particle: DAMAGE_INDICATOR
    on_redeem:
      commands: []
      sound: ENTITY_PLAYER_LEVELUP
      particle: TOTEM

# ==========================================
# 全局事件配置
# ==========================================

# 权力强制回收
revoke_power:
  commands:
    - "say §c%player% 的权力被强制回收！"
  sound: ENTITY_ENDERMAN_TELEPORT
  particle: FLAME

# 宝石集齐时触发
gem_union_execute:
  commands:
    - "say §a%player% 集齐了所有宝石！"
  sound: ENTITY_PLAYER_LEVELUP
  particle: TOTEM

# 宝石散落时触发
gem_scatter_execute:
  commands:
    - "say §c权力宝石散落了！"
  sound: ENTITY_WITHER_SPAWN
  particle: EXPLOSION

# 授权策略
grant_policy:
  inventory_grants: false      # 拾取后立即生效
  redeem_enabled: true         # 允许使用 /rulegems redeem 兑换
  full_set_grants_all: true    # 允许使用 /rulegems redeemall 一次性兑换全部